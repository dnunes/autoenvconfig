<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Autoenvconfig by dnunes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Autoenvconfig</h1>
      <h2 class="project-tagline">Environment config that Just Works™!</h2>
      <a href="https://github.com/dnunes/autoenvconfig" class="btn">View on GitHub</a>
      <a href="https://github.com/dnunes/autoenvconfig/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dnunes/autoenvconfig/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>Stop worrying about the hassle of <strong>loading environment config files everywhere</strong>, <strong>config files with missing entries</strong> or <strong>schemas that gets old when you forget to add a new config key to it</strong>.</p>

<p><strong>AutoEnvConfig</strong> is a no-nonsense, no-dependencies package to help you keep your ever expanding project under control.</p>

<p><strong>AutoEnvConfig</strong> was designed with simple but very powerful goals:</p>

<ul>
<li>
<strong>Blazing fast</strong>: it caches everything it can, loads your files only once and check your schema on load, not on usage;</li>
<li>
<strong>No extra configuration needed</strong>: this package follows the idea of <em>convention over configuration</em>, so it keeps the required environment files to a minimum and there is nothing to thinker with before start using it;</li>
<li>
<strong>Never out of sync</strong>: when loading the environment configuration file, it checks the schema for <em>missing AND for extra keys</em>, alerting you when you are missing some key in your config or in your schema file;</li>
<li>
<strong>Auto load the right config file</strong>: you can set the root path of the project in the environment config file and it will load automatically.</li>
</ul>

<p>Create your schema specifying optional and required keys (plus: it can contain default values, too!), setup your environment file with specific overrides and you're good to go.</p>

<h2>
<a id="basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="basicusage">Basic Usage</a>
</h2>

<p>There is just four steps needed to start using this package:</p>

<ol>
<li>Create a folder named <code>envs</code> on your project's root;</li>
<li>Create a <a href="#sampleschema"><code>config.schema</code></a> file with your schema;</li>
<li>Create a <a href="#sampleenv"><code>ENVNAME.json</code></a> file for each environment with its specific configuration (where <code>ENVNAME</code> is whatever name you wish to use);</li>
<li>Load the package. It is ready to read your values.</li>
</ol>

<p>In your code:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">AutoEnvConfig</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>autoenvconfig<span class="pl-pds">'</span></span>);

<span class="pl-k">let</span> valueFromConfig <span class="pl-k">=</span> <span class="pl-smi">AutoEnvConfig</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>deep.key.supported<span class="pl-pds">'</span></span>));
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(valueFromConfig); <span class="pl-c">//"myValue"</span></pre></div>

<h2>
<a id="conventions" class="anchor" href="#conventions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="conventions">Conventions</a>
</h2>

<h3>
<a id="magic-loading" class="anchor" href="#magic-loading" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="magicload">Magic Loading</a>
</h3>

<p>For the magic load to happen, your <a href="#sampleschema"><code>config.schema</code></a> and <a href="#sampleenv"><code>ENVNAME.json</code></a> files must have a "path" key with the path of your project's root. It will find the correct environment checking this value by default. You can, however, safely ignore this convention and manually specify the file name.</p>

<h3>
<a id="schema-and-and-environment-file-formats" class="anchor" href="#schema-and-and-environment-file-formats" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="magicload">Schema and and Environment File formats</a>
</h3>

<p>The schema and environment config files are simple JSON files. The only limit for the <em>keys</em> is the dot character ("<code>.</code>") which is forbidden (because it is used as a separator when loading), but I suggest you to limit your keys to alphanumeric chars for simplicity.</p>

<p>In the schema files, every key <em>MUST</em> be prefixed with either <code>#</code> or <code>?</code>, indicating mandatory or optional key, respectively.</p>

<h2>
<a id="sample-files" class="anchor" href="#sample-files" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="samples">Sample Files</a>
</h2>

<h3>
<a id="sample-configschema" class="anchor" href="#sample-configschema" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="sampleschema">Sample config.schema</a>
</h3>

<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span># id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span># envtype<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span># path<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,

  <span class="pl-s"><span class="pl-pds">"</span># requiredKey<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>? deep<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>? key<span class="pl-pds">"</span></span>: {
      <span class="pl-s"><span class="pl-pds">"</span># supported<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>myValue<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>? asWell<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>otherValue<span class="pl-pds">"</span></span>
    }
  }
}</pre></div>

<p>You can have a required key inside an optional object (in this sample, the <code>supported</code> required key is inside optional <code>deep</code> and <code>key</code> objects), so that you can omit the whole object (it will use the defaults), but if it exists in the environment config file, it must contain at least these required keys.</p>

<h3>
<a id="sample-envnamejson" class="anchor" href="#sample-envnamejson" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="sampleenv">Sample ENVNAME.json</a>
</h3>

<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>dev<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>envtype<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>local<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>path<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>/home/dnunes/code/node/autoenvconfig<span class="pl-pds">"</span></span>,

  <span class="pl-s"><span class="pl-pds">"</span>requiredKey<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>
}</pre></div>

<h2>
<a id="advanced-usage" class="anchor" href="#advanced-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="advancedusage">Advanced Usage</a>
</h2>

<p>You can override the default file and bypass the environment file search routine by calling the <code>load</code> method:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//will load envs/other.json</span>
AutoEnvConfig <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>autoenvconfig<span class="pl-pds">'</span></span>).<span class="pl-c1">load</span>(<span class="pl-s"><span class="pl-pds">'</span>other<span class="pl-pds">'</span></span>);
<span class="pl-smi">AutoEnvConfig</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>ket.in.other.file<span class="pl-pds">'</span></span>);</pre></div>

<p>You can also load multiple configs if ever needed:</p>

<div class="highlight highlight-source-js"><pre>AutoEnvConfig <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>autoenvconfig<span class="pl-pds">'</span></span>);

<span class="pl-c">//load the right env based on "path" config value</span>
<span class="pl-k">let</span> rightConfig <span class="pl-k">=</span> <span class="pl-smi">AutoEnvConfig</span>.<span class="pl-c1">load</span>();
<span class="pl-smi">rightConfig</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>key.in.right.file<span class="pl-pds">'</span></span>);

<span class="pl-c">//load "envs/other.json"</span>
<span class="pl-k">let</span> otherConfig <span class="pl-k">=</span> <span class="pl-smi">AutoEnvConfig</span>.<span class="pl-c1">load</span>(<span class="pl-s"><span class="pl-pds">'</span>other<span class="pl-pds">'</span></span>);
<span class="pl-smi">otherConfig</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>key.in.other.file<span class="pl-pds">'</span></span>);

<span class="pl-c">//load "envs/oneMore.json"</span>
<span class="pl-k">let</span> oneMoreConfig <span class="pl-k">=</span> <span class="pl-smi">rightConfig</span> .<span class="pl-c1">load</span>(<span class="pl-s"><span class="pl-pds">'</span>oneMore.json<span class="pl-pds">'</span></span>);
<span class="pl-smi">oneMoreConfig</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>key.in.onemore.file<span class="pl-pds">'</span></span>);</pre></div>

<p>Note that you can call <code>load</code> directly on the package or on any <code>AutoEnvConfig</code> object returned by the <code>load</code> method.</p>

<h2>
<a id="release-history" class="anchor" href="#release-history" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="releaseh">Release History</a>
</h2>

<ul>
<li><p>0.1.3 Removed "get" aliases, fixed "instance.get()" and added "has" method;</p></li>
<li><p>0.1.2 Improved syntaxerror handling in schema files;</p></li>
<li><p>0.1.1 Bugfix for using natural expected behavior after .load('name');</p></li>
<li><p>0.1.0 Initial release.</p></li>
</ul>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="credits">Credits</a>
</h2>

<p>Created and maintained (with much ♡) by <a href="http://dnunes.com">diego nunes</a></p>

<p>Donations with Bitcoin to <em>1H6Z1xbq1Lh3zKhEnDBxHZgEjcFPPjkpKF</em>:</p>

<p><img src="http://chart.apis.google.com/chart?cht=qr&amp;chs=200x200&amp;chl=bitcoin:1H6Z1xbq1Lh3zKhEnDBxHZgEjcFPPjkpKF" alt="1H6Z1xbq1Lh3zKhEnDBxHZgEjcFPPjkpKF"></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dnunes/autoenvconfig">Autoenvconfig</a> is maintained by <a href="https://github.com/dnunes">dnunes</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
